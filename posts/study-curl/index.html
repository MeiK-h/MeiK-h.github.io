<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>MeiK&#39;s blog  | curl 学习</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.58.3" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    
    
    <meta property="og:title" content="curl 学习" />
<meta property="og:description" content="curl 不仅仅是一个编程时可以包含的函数库，也是一个功能强大的网站开发工具。仅仅使用其原生命令，就可以实现大部分网络爬虫的功能。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://meik2333.com/posts/study-curl/" />
<meta property="article:published_time" content="2018-07-22T14:17:54+00:00" />
<meta property="article:modified_time" content="2018-07-22T14:17:54+00:00" />
<meta itemprop="name" content="curl 学习">
<meta itemprop="description" content="curl 不仅仅是一个编程时可以包含的函数库，也是一个功能强大的网站开发工具。仅仅使用其原生命令，就可以实现大部分网络爬虫的功能。">


<meta itemprop="datePublished" content="2018-07-22T14:17:54&#43;00:00" />
<meta itemprop="dateModified" content="2018-07-22T14:17:54&#43;00:00" />
<meta itemprop="wordCount" content="496">



<meta itemprop="keywords" content="网络编程,cUrl," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="curl 学习"/>
<meta name="twitter:description" content="curl 不仅仅是一个编程时可以包含的函数库，也是一个功能强大的网站开发工具。仅仅使用其原生命令，就可以实现大部分网络爬虫的功能。"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://meik2333.com" class="f3 fw2 hover-white no-underline white-90 dib">
      MeiK&#39;s blog
    </a>
    <div class="flex-l items-center">
      

      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        POSTS
      </p>
      <h1 class="f1 athelas mb1">curl 学习</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2018-07-22T14:17:54Z">July 22, 2018</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>curl 不仅仅是一个编程时可以包含的函数库，也是一个功能强大的网站开发工具。仅仅使用其原生命令，就可以实现大部分网络爬虫的功能。</p>

<h2 id="curl-的使用">curl 的使用</h2>

<h3 id="url">url</h3>

<p>将要请求的 url, 必须填写的参数.</p>

<p>默认的请求类型为 GET, 默认输出到标准输出</p>

<pre><code class="language-shell">curl http://httpbin.org/get
</code></pre>

<h3 id="c-continue-at">-C, &ndash;continue-at</h3>

<p>使下载支持断点续传, 需要指定偏移量或者 <code>-</code> 自动计算</p>

<pre><code class="language-shell">curl https://httpbin.org/download.zip -O -C -
</code></pre>

<p>如果下载中途中断了, 则可以再次执行此命令来进行续传</p>

<h3 id="b-cookie">-b, &ndash;cookie</h3>

<p>使用指定的 cookie 请求页面</p>

<ul>
<li><p>从 <code>-c</code> 导出的文件(cookie.txt)中读取</p>

<pre><code class="language-shell">curl http://httpbin.org/cookies -b @cookie.txt
</code></pre></li>

<li><p>使用 cookie 字符串</p>

<pre><code class="language-shell">curl http://httpbin.org/cookies -b 'key=value'
</code></pre></li>
</ul>

<h3 id="c-cookie-jar">-c, &ndash;cookie-jar</h3>

<p>将 cookie 保存到指定的文件</p>

<pre><code class="language-shell">curl http://httpbin.org/cookies/set/key/value -c cookie.txt
</code></pre>

<h3 id="d-data">-d, &ndash;data</h3>

<p>请求中的 POST 数据, 添加此参数后默认请求类型变为 POST</p>

<pre><code class="language-shell">curl http://httpbin.org/post -d 'key1=value1&amp;key2=value2&amp;key2=value3'
{
    &quot;key1&quot;: &quot;value1&quot;,
    &quot;key2&quot;: [&quot;value2&quot;, &quot;value2&quot;]
}
curl http://httpbin.org/post -d 'key1=value1' -d 'key2=value2' -d 'key2=value3'
{
    &quot;key1&quot;: &quot;value1&quot;,
    &quot;key2&quot;: [&quot;value2&quot;, &quot;value2&quot;]
}
</code></pre>

<h3 id="data-ascii">&ndash;data-ascii</h3>

<p>类似于 -d, 暂时没有发现区别</p>

<h3 id="data-urlencode">&ndash;data-urlencode</h3>

<p>类似于 -d, 参数中的 &lsquo;&amp;&rsquo; 会被转义, 不会切断参数</p>

<pre><code class="language-shell">curl http://httpbin.org/post --data-urlencode 'key1=value1&amp;key2=value2&amp;key2=value3'
{
    &quot;key1&quot;: &quot;value1&amp;key2=value2&amp;key2=value3&quot;
}
curl http://httpbin.org/post --data-urlencode 'key1=value1' --data-urlencode 'key2=value2' --data-urlencode 'key2=value3'
{
    &quot;key1&quot;: &quot;value1&quot;,
    &quot;key2&quot;: [&quot;value2&quot;, &quot;value2&quot;]
}
</code></pre>

<h3 id="f-form">-F, &ndash;form</h3>

<p>指定 multipart MIME 数据, 可以用来上传文件</p>

<pre><code class="language-shell">curl http://httpbin.org/post -F file=@filename
</code></pre>

<h3 id="form-string">&ndash;form-string</h3>

<p>以 multipart MIME 格式上传数据</p>

<pre><code class="language-shell">curl http://httpbin.org/post --form-string 'key=value'
</code></pre>

<h3 id="g-get">-G, &ndash;get</h3>

<p>将请求的数据放在 URL 中, 以 <code>GET</code> 形式请求</p>

<pre><code class="language-shell">curl meik$ curl http://httpbin.org/get -d 'key=value' -G
</code></pre>

<h3 id="g-globoff">-g, &ndash;globoff</h3>

<p>忽略表示范围的 <code>[]</code> 和 <code>{}</code></p>

<pre><code class="language-shell">curl http://httpbin.org/cookies/set/key/value[1-5] -g
</code></pre>

<p>关于 <code>[]</code> 和 <code>{}</code> 表示范围的用法, 可以查看下面的&rdquo;拓展用法&rdquo;部分</p>

<h3 id="i-head">-I, &ndash;head</h3>

<p>只请求头部信息, 使用的是 <code>head</code> 请求</p>

<pre><code class="language-shell">curl http://httpbin.org/get -I
</code></pre>

<p>可以通过 <code>-v</code> 选项来验证其使用的是 <code>head</code> 请求</p>

<pre><code class="language-shell">curl http://httpbin.org/get -I -v
...
&gt; HEAD /get HTTP/1.1
...
</code></pre>

<h3 id="h-header">-H, &ndash;header</h3>

<p>添加自定义的 <code>header</code> 信息</p>

<pre><code class="language-shell">curl http://httpbin.org/get -H 'Key: value'
curl http://httpbin.org/get -H @header.txt
</code></pre>

<h3 id="0-http1-0">-0, &ndash;http1.0</h3>

<p>使用 HTTP/1.0</p>

<pre><code class="language-shell">curl http://httpbin.org/get -0
</code></pre>

<h3 id="http1-1">&ndash;http1.1</h3>

<p>使用 HTTP/1.1</p>

<pre><code class="language-shell">curl http://httpbin.org/get --http1.1
</code></pre>

<h3 id="i-include">-i, &ndash;include</h3>

<p>同时在 <code>stdout</code> 中显示响应的头部信息</p>

<pre><code class="language-shell">curl http://httpbin.org/get -i
</code></pre>

<h3 id="l-location">-L, &ndash;location</h3>

<p>自动进行页面跳转</p>

<pre><code class="language-shell">curl http://httpbin.org/status/302 -L
</code></pre>

<p>添加 <code>-v</code> 参数查看具体请求过程</p>

<pre><code class="language-shell">curl http://httpbin.org/status/302 -L -v
&gt; GET /status/302 HTTP/1.1
&gt; Host: httpbin.org
&gt;
&lt; HTTP/1.1 302 FOUND
&lt; Location: /redirect/1
&lt;
&gt; GET /redirect/1 HTTP/1.1
&gt; Host: httpbin.org
&gt;
&lt; HTTP/1.1 302 FOUND
&lt; Location: /get
&lt;
&gt; GET /get HTTP/1.1
&gt; Host: httpbin.org
&gt;
&lt; HTTP/1.1 200 OK
</code></pre>

<p>可以看出, 如果返回的仍然是一个重定向的话, 那么 curl 会继续请求</p>

<p>如果跳转的时候设置了 <code>set-cookie</code>, 那么此选项也不会在后续的请求中添加 <code>cookie</code> 信息</p>

<pre><code class="language-shell">curl http://httpbin.org/cookies/set/key/value -L
{&quot;cookies&quot;:{}}
</code></pre>

<p>为了在跳转的页面中可以使用 <code>cookie</code>, 可以搭配使用 <code>-c</code> 和 <code>-b</code> 选项</p>

<pre><code class="language-shell">curl http://httpbin.org/cookies/set/key/value -L -c cookie.txt -b @cookie.txt
{&quot;cookies&quot;:{&quot;key&quot;:&quot;value&quot;}}
</code></pre>

<h3 id="o-output">-o, &ndash;output</h3>

<p>将请求到的数据保存为指定的文件</p>

<pre><code class="language-shell">curl http://httpbin.org/get -o get.html
</code></pre>

<h3 id="progress-bar">-#, &ndash;progress-bar</h3>

<p>下载时显示进度条</p>

<pre><code class="language-shell">curl http://httpbin.org/download.zip -O -C - -#
#####                                    13.7%
</code></pre>

<p>会隐藏其他信息, 显示一个 <code>#</code> 组成的进度条, 以及文件百分比</p>

<h3 id="x-proxy">-x, &ndash;proxy</h3>

<p>使用代理</p>

<pre><code class="language-shell">curl https://www.google.com
(无响应)
^C
curl https://www.google.com -x http://127.0.0.1:6666
...(请求的结果)
</code></pre>

<h3 id="e-referer">-e, &ndash;referer</h3>

<p>设置 HTTP 头信息的 <code>referer</code></p>

<pre><code class="language-shell">curl http://httpbin.org/get -e 'http://httpbin.org'
</code></pre>

<p>有些网站会验证 <code>referer</code> 字段</p>

<h3 id="o-remote-name">-O, &ndash;remote-name</h3>

<p>将请求到的数据以 URL 中的路径为名保存到本地</p>

<pre><code class="language-shell">curl http://httpbin.org/get -O
</code></pre>

<p>请求到的数据会被保存到名为 <code>get</code> 的文件内</p>

<h3 id="x-request">-X, &ndash;request</h3>

<p>指定请求的类型</p>

<pre><code class="language-shell">curl http://httpbin.org/post -X POST
</code></pre>

<p>请求的类型可以为自定义的类型, 比如</p>

<pre><code class="language-shell">curl http://httpbin.org/post -X POST666 -v
...
&gt; POST666 /post HTTP/1.1
...
</code></pre>

<h3 id="s-show-error">-S, &ndash;show-error</h3>

<p>在静默模式下也输出错误信息</p>

<h3 id="s-silent">-s, &ndash;silent</h3>

<p>静默模式</p>

<h3 id="trace">trace</h3>

<p>输出 debug 信息到文件</p>

<pre><code class="language-shell">curl http://httpbin.org/get --trace trace.txt
</code></pre>

<h3 id="trace-ascii">trace-ascii</h3>

<p>输出 debug 信息到文件, 不包含 hex 数据</p>

<pre><code class="language-shell">curl http://httpbin.org/get --trace-ascii trace.txt
</code></pre>

<h3 id="trace-time">trace-time</h3>

<p>为 <code>trace</code> 的输出时间</p>

<pre><code class="language-shell">curl http://httpbin.org/get --trace-ascii trace.txt --trace-time
</code></pre>

<h3 id="url-1">&ndash;url</h3>

<p>要请求的 URL</p>

<pre><code class="language-shelll">curl --url http://httpbin.org/get
</code></pre>

<h3 id="a-user-agent">-A, &ndash;user-agent</h3>

<p>修改请求的 UA</p>

<pre><code class="language-shell">curl meik$ curl http://httpbin.org/get -A 'MeiK'
&quot;User-Agent&quot;: &quot;MeiK&quot;
</code></pre>

<h3 id="v-verbose">-v, &ndash;verbose</h3>

<p>让输出更加详细, 会额外输出请求 ip 、请求头、响应头等信息</p>

<pre><code class="language-shell">curl http://httpbin.org/get -v
</code></pre>

<h3 id="v-version">-V, &ndash;version</h3>

<p>输出版本信息和版本特性等信息</p>

<pre><code class="language-shell">curl -V
</code></pre>

<h2 id="拓展用法">拓展用法</h2>

<h3 id="与-表示范围"><code>[]</code> 与 <code>{}</code> 表示范围</h3>

<ul>
<li><p>用 <code>{}</code> 表示多个 URL</p>

<pre><code class="language-shell">curl http://httpbin.org/cookies/set/key/value{1,2,3}
</code></pre>

<p>会访问三个 URL</p></li>

<li><p>用 <code>[]</code> 表示范围</p>

<pre><code class="language-shell">curl http://httpbin.org/cookies/set/key/value[1-3]
curl http://httpbin.org/cookies/set/key/value[a-z]
</code></pre>

<p>如果你用过 Python 的话, 那应该对这种用法很熟悉</p>

<pre><code class="language-shell">curl http://httpbin.org/cookies/set/key/value[1-10:2]
</code></pre>

<p>冒号后边的部分是步长, 表示等差排列的阶跃数</p></li>

<li><p>混合使用 <code>{}</code> 与 <code>[]</code></p>

<pre><code class="language-shell">curl http://httpbin.org/cookies/set/key{1,2,3}/value[1-3]
</code></pre>

<p>会请求其每种组合(3*3=9)</p></li>
</ul><ul class="pa0">
  
   <li class="list">
     <a href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">网络编程</a>
   </li>
  
   <li class="list">
     <a href="/tags/curl" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">cUrl</a>
   </li>
  
</ul>
<div class="mt6">
      
      
      </div>
    </section>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/posts/webbench-source-and-analysis/">WebBench 源码分析 [不推荐阅读]</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/tinyhttpd-source-and-analysis/">Tinyhttpd 源码及分析</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://meik2333.com" >
    &copy; 2019 MeiK&#39;s blog
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
